const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseClient-D72_Ab-D.js","assets/tslib.es6-BTK8C33X.js"])))=>i.map(i=>d[i]);
import{r as g,j as e,_ as J}from"./index-CRFhanc3.js";import{X as L,T as U,e as F,S as Y,r as Z,s as C,P as B,D as O}from"./App-CTFBvRA4.js";import{C as I}from"./calendar-K9MhvfDo.js";import{E as Q}from"./external-link-Bquijlrx.js";import{U as _}from"./user-Cv5L4kDT.js";import{M as X}from"./mail-93JP2oXM.js";const ae=({isOpen:x,onClose:u,selectedScpi:E=[],recommendedScpi:M=[],clientProfile:$=null,profilRisque:c="Non d√©fini",profilESG:m="Standard",scpi:b=[]})=>{const P=[...E.map(a=>a.name),...M,...b],l=[...new Set(P)],[r,k]=g.useState({name:"",email:"",phone:"",montant:"",commentaire:"",creneau:""}),[h,p]=g.useState(null),[v,N]=g.useState(!1);g.useEffect(()=>{if(x){const a=new URLSearchParams(window.location.search),t=a.get("utm_source"),s=a.get("utm_medium"),n=a.get("utm_campaign"),o=a.get("gclid");(t||s||n||o)&&(console.log("üìç Param√®tres Google Ads d√©tect√©s dans RdvModal:",{utmSource:t,utmMedium:s,utmCampaign:n,gclid:o}),t&&sessionStorage.setItem("utm_source",t),s&&sessionStorage.setItem("utm_medium",s),n&&sessionStorage.setItem("utm_campaign",n),o&&sessionStorage.setItem("gclid",o))}},[x]);const z=a=>{a.target===a.currentTarget&&u()};if(!x)return null;const i=a=>{const{name:t,value:s}=a.target;k(n=>({...n,[t]:s}))},T=async a=>{a.preventDefault(),N(!0),p(null);try{const{supabase:t}=await J(async()=>{const{supabase:j}=await import("./supabaseClient-D72_Ab-D.js");return{supabase:j}},__vite__mapDeps([0,1])),s=sessionStorage.getItem("utm_source"),n=sessionStorage.getItem("utm_medium"),o=sessionStorage.getItem("utm_campaign"),f=sessionStorage.getItem("gclid"),w=s==="google"||f!==null,S=w?"leads_ads_formulaire":"contacts_site";console.log("üîç RdvModal - Routage vers",S,":",{utmSource:s,utmMedium:n,utmCampaign:o,gclid:f});const d={nom:r.name,email:r.email,telephone:r.phone,montant:r.montant,commentaire:r.commentaire,creneau:r.creneau,profil_risque:c,profil_esg:m,scpi:b,portfolio_selection:l.length>0?l:null,statut:"nouveau"};w?(d.utm_source=s,d.utm_medium=n,d.utm_campaign=o,d.gclid=f):d.type_contact="formulaire";const{data:V,error:y}=await t.from(S).insert([d]).select();if(y)throw console.error("Erreur Supabase:",y),new Error(`Erreur: ${y.message}`);console.log("‚úÖ Enregistrement cr√©√© :",V);const q={nom:r.name,email:r.email,telephone:r.phone,montant:r.montant,commentaire:r.commentaire,creneau:r.creneau,profil_risque:c,profil_esg:m,scpi:b,portfolio_selection:l.length>0?l:null,source:"Souscription"},A="https://eldvbqqgelifxkbyytip.supabase.co/functions/v1/send-lead-notification",R={Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsZHZicXFnZWxpZnhrYnl5dGlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MjQ0MDQsImV4cCI6MjA3NTAwMDQwNH0.wTyYm7bQ5NItD3urYRaoNLI2YuYvLnamVL3B2xp-doE","Content-Type":"application/json"};try{await fetch(A,{method:"POST",headers:R,body:JSON.stringify(q)})}catch(j){console.error("Erreur envoi email (non bloquant):",j)}p("‚úÖ Votre demande a bien √©t√© envoy√©e ! Vous recevrez une r√©ponse rapidement."),k({name:"",email:"",phone:"",montant:"",commentaire:"",creneau:""}),setTimeout(()=>{window.location.href="/merci-landing-page.html"},1500)}catch(t){console.error("‚ùå Erreur :",t),p(`‚ùå Erreur: ${t instanceof Error?t.message:"Probl√®me technique"}`)}finally{N(!1)}},D=()=>{window.open("https://calendly.com/eric-bellaiche/gp-rendez-vous-avec-eric-bellaiche-clone","_blank")};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-center z-[10001] p-4 pt-8 overflow-y-auto",onClick:z,style:{zIndex:10001},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-3xl max-h-[90vh] shadow-2xl border border-gray-200 dark:border-gray-600 flex flex-col my-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-gray-100 mb-1",children:"üìÖ Prendre rendez-vous"}),e.jsx("p",{className:"text-base font-medium text-gray-700 dark:text-gray-200",children:"√âchangez avec Eric Bellaiche, expert SCPI certifi√©"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-500 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50 rounded-full transition-colors",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:[e.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-lg mb-1",children:"üöÄ R√©servation directe"}),e.jsx("p",{className:"text-base font-medium text-green-100",children:"Choisissez votre cr√©neau en temps r√©el"})]})]}),e.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-white text-green-600 rounded-xl font-black text-base hover:bg-green-50 transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 transform",children:[e.jsx(Q,{className:"w-5 h-5"}),"R√©server sur Calendly"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-600"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"ou"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-600"})]}),l.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("h4",{className:"font-black text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2 text-base",children:[e.jsx(U,{className:"w-4 h-4"}),"SCPI s√©lectionn√©es (",l.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((a,t)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 text-sm font-bold rounded-full",children:a},t))})]}),(c!=="Non d√©fini"||m!=="Standard")&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[e.jsxs("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"w-4 h-4"}),"Votre profil"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsxs("span",{className:"text-xs text-purple-700 dark:text-purple-300",children:[e.jsx("strong",{children:"Risque:"})," ",c]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsxs("span",{className:"text-xs text-purple-700 dark:text-purple-300",children:[e.jsx("strong",{children:"ESG:"})," ",m]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-black text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[e.jsx(C,{className:"w-5 h-5"}),"Demande de contact personnalis√©e"]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(_,{className:"w-4 h-4 inline mr-1"}),"Nom complet *"]}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:i,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent",placeholder:"Votre nom et pr√©nom"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(X,{className:"w-4 h-4 inline mr-1"}),"Email *"]}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:i,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent",placeholder:"votre@email.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(B,{className:"w-4 h-4 inline mr-1"}),"T√©l√©phone *"]}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:i,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent",placeholder:"Votre num√©ro de t√©l√©phone"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(O,{className:"w-4 h-4 inline mr-1"}),"Montant √† investir *"]}),e.jsx("input",{type:"text",name:"montant",value:r.montant,onChange:i,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent",placeholder:"Ex: 50 000‚Ç¨"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(I,{className:"w-4 h-4 inline mr-1"}),"Cr√©neau pr√©f√©r√© *"]}),e.jsxs("select",{name:"creneau",value:r.creneau,onChange:i,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"S√©lectionner..."}),e.jsx("option",{value:"Matin (9h-12h)",children:"Matin (9h-12h)"}),e.jsx("option",{value:"Apr√®s-midi (14h-17h)",children:"Apr√®s-midi (14h-17h)"}),e.jsx("option",{value:"Soir (18h-20h)",children:"Soir (18h-20h)"}),e.jsx("option",{value:"Weekend",children:"Weekend"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 dark:text-gray-100 mb-1",children:[e.jsx(C,{className:"w-4 h-4 inline mr-1"}),"Commentaire *"]}),e.jsx("textarea",{name:"commentaire",value:r.commentaire,onChange:i,required:!0,rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium text-base focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:border-transparent resize-none",placeholder:"D√©crivez votre projet d'investissement..."})]}),h&&e.jsx("div",{className:`p-4 rounded-lg border ${h.includes("‚úÖ")?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-300"}`,children:e.jsx("p",{className:"text-sm font-bold",children:h})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-lg font-black text-base hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-6 py-3 bg-green-600 dark:bg-green-500 text-white rounded-lg font-black text-base hover:bg-green-700 dark:hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg hover:shadow-xl hover:-translate-y-0.5 transform duration-200",children:v?"Envoi en cours...":"Envoyer la demande"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800/50 dark:to-slate-800/50 rounded-xl border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-gray-900 dark:text-white text-lg",children:"Eric Bellaiche"}),e.jsx("p",{className:"text-base font-medium text-gray-700 dark:text-gray-200",children:"Conseiller en Gestion de Patrimoine Certifi√©"}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 text-sm font-bold rounded",children:"CIF n¬∞D016571"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 text-sm font-bold rounded",children:"CNCEF"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm font-medium text-gray-700 dark:text-gray-200",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sp√©cialit√©s :"}),e.jsxs("ul",{className:"mt-1 space-y-0.5",children:[e.jsx("li",{children:"‚Ä¢ Investissement SCPI"}),e.jsx("li",{children:"‚Ä¢ Optimisation fiscale"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Engagement :"}),e.jsxs("ul",{className:"mt-1 space-y-0.5",children:[e.jsx("li",{children:"‚Ä¢ Conseil personnalis√©"}),e.jsx("li",{children:"‚Ä¢ Transparence totale"})]})]})]})]})]})]})})};export{ae as default};
