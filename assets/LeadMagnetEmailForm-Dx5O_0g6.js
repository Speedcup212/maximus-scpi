const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseClient-D72_Ab-D.js","assets/tslib.es6-BTK8C33X.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,_ as y}from"./index-CRFhanc3.js";const N=()=>{const[t,u]=a.useState(""),[n,g]=a.useState(""),[o,x]=a.useState(""),[l,p]=a.useState(!1),[c,i]=a.useState(!1),f=async r=>{if(r.preventDefault(),!l){alert("Veuillez accepter de recevoir nos communications par email.");return}i(!0);try{const{supabase:s}=await y(async()=>{const{supabase:b}=await import("./supabaseClient-D72_Ab-D.js");return{supabase:b}},__vite__mapDeps([0,1]));console.log("üöÄ Appel Sender en cours...");const{data:h,error:d}=await s.functions.invoke("sender-add-contact",{body:{email:t,firstname:n,lastname:o,group_id:"LM_SCPI_SansFrais",fields:{source:"Lead Magnet - Guide Comparatif",date_telechargement:new Date().toISOString()}}});d?(console.error("‚ùå Erreur Sender:",d),console.error("D√©tails:",JSON.stringify(d,null,2))):console.log("‚úÖ Contact ajout√© √† Sender:",h);const{error:m}=await s.from("leads_pdf_comparatif").insert([{email:t,prenom:n,nom:o,source_page:"Guide Comparatif Iroko Zen vs Novaxia Neo",consentement_marketing:!0,consentement_date:new Date().toISOString(),source:"Lead Magnet - Guide Comparatif"}]);if(m){console.error("Erreur Supabase:",m),alert("Une erreur est survenue. Veuillez r√©essayer."),i(!1);return}window.gtag&&window.gtag("event","generate_lead",{event_category:"Lead Magnet",event_label:"Guide PDF Iroko vs Novaxia"}),localStorage.setItem("lead_email",t),window.location.href=`/merci-guide-comparatif.html?email=${encodeURIComponent(t)}`}catch(s){console.error("Erreur capture lead:",s),alert("Une erreur est survenue. Veuillez r√©essayer."),i(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-3 text-center leading-tight",children:[e.jsx("span",{className:"block text-emerald-700",children:"SCPI sans frais"}),e.jsx("span",{className:"block text-gray-900",children:"Iroko Zen vs Novaxia Neo :"}),e.jsx("span",{className:"block text-gray-900",children:"le comparatif qui tranche"})]}),e.jsx("h3",{className:"text-lg text-gray-700 mb-6 text-center font-medium",children:"Analyse chiffr√©e et op√©rationnelle des deux SCPI sans frais d'entr√©e"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prenom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr√©nom *"}),e.jsx("input",{type:"text",id:"prenom",name:"prenom",required:!0,value:n,onChange:r=>g(r.target.value),placeholder:"Votre pr√©nom",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),e.jsx("input",{type:"text",id:"nom",name:"nom",required:!0,value:o,onChange:r=>x(r.target.value),placeholder:"Votre nom",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail *"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:t,onChange:r=>u(r.target.value),placeholder:"Votre adresse e-mail",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-gray-900"})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"consentement",name:"consentement",required:!0,checked:l,onChange:r=>p(r.target.checked),className:"mt-1 h-5 w-5 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),e.jsxs("label",{htmlFor:"consentement",className:"text-sm text-gray-700 leading-relaxed",children:["J'accepte de recevoir des conseils et informations sur l'investissement SCPI par email. Je peux me d√©sabonner √† tout moment via le lien pr√©sent dans chaque email. *",e.jsx("a",{href:"/conditions-utilisation",target:"_blank",className:"text-emerald-600 hover:text-emerald-700 underline ml-1",children:"En savoir plus"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"* Champs obligatoires"}),e.jsx("button",{type:"submit",disabled:c||!l,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Envoi en cours...":"Recevoir le Guide PDF"})]})]})};export{N as L};
