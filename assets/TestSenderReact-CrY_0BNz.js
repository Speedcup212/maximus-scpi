const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseClient-D72_Ab-D.js","assets/tslib.es6-BTK8C33X.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,_ as j}from"./index-CRFhanc3.js";const N=()=>{const[n,g]=a.useState(""),[o,b]=a.useState(""),[l,h]=a.useState(""),[c,i]=a.useState(!1),[u,m]=a.useState([]),r=(s,t)=>{m(d=>[...d,{type:t,message:s}]),console.log(`[${t}] ${s}`)},f=async s=>{s.preventDefault(),i(!0),m([]);try{r("üöÄ D√©marrage du test...","info"),r("üì° Appel Edge Function sender-add-contact...","info");const{supabase:t}=await j(async()=>{const{supabase:S}=await import("./supabaseClient-D72_Ab-D.js");return{supabase:S}},__vite__mapDeps([0,1])),{data:d,error:p}=await t.functions.invoke("sender-add-contact",{body:{email:n,firstname:o,lastname:l,group_id:"LM_SCPI_SansFrais",fields:{source:"Test React Component",test_date:new Date().toISOString()}}});p?r(`‚ùå Erreur Sender: ${JSON.stringify(p)}`,"error"):r(`‚úÖ Sender OK: ${JSON.stringify(d)}`,"success"),r("üíæ Insertion dans Supabase...","info");const{error:x}=await t.from("leads_pdf_comparatif").insert([{email:n,prenom:o,nom:l,source:"Test React Component",source_page:"Test Sender React",consentement_marketing:!0,consentement_date:new Date().toISOString()}]);x?r(`‚ùå Erreur Supabase: ${x.message}`,"error"):r("‚úÖ Supabase OK: Lead enregistr√©","success"),r("üéâ Test termin√© avec succ√®s !","success")}catch(t){r(`‚ùå Erreur fatale: ${t.message}`,"error"),console.error(t)}finally{i(!1)}},y=s=>{switch(s){case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-blue-600"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Sender + Supabase (React)"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Testez l'int√©gration compl√®te Sender.net + Supabase depuis un composant React"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",id:"email",required:!0,value:n,onChange:s=>g(s.target.value),placeholder:"test@example.com",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prenom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr√©nom *"}),e.jsx("input",{type:"text",id:"prenom",required:!0,value:o,onChange:s=>b(s.target.value),placeholder:"Jean",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),e.jsx("input",{type:"text",id:"nom",required:!0,value:l,onChange:s=>h(s.target.value),placeholder:"Dupont",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:c?"‚è≥ Test en cours...":"üöÄ Tester Sender + Supabase"})]}),u.length>0&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"üìã Logs d'ex√©cution"}),e.jsx("div",{className:"space-y-2 font-mono text-sm",children:u.map((s,t)=>e.jsxs("div",{className:y(s.type),children:["[",s.type,"] ",s.message]},t))})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"‚ÑπÔ∏è Informations"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Groupe Sender :"})," LM_SCPI_SansFrais"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Table Supabase :"})," leads_pdf_comparatif"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edge Function :"})," sender-add-contact"]}),e.jsx("p",{className:"text-gray-500 italic",children:"Ce test valide que l'int√©gration fonctionne correctement depuis un composant React."})]})]})]})})};export{N as default};
