import{E}from"./pdf-generator-D0-wWJKO.js";import{f as b}from"./index-BNFrlC0M.js";import"./vendor-Bp5sKRBY.js";import"./react-vendor-GOUMmrmq.js";import"./scpi-data-DxUd5HM1.js";import"./data-BYEtshN-.js";import"./education-data-IbGzu-Fz.js";const W=async(e,t,o)=>{const n=new E("p","mm","a4"),s=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),r={primary:[0,86,179],secondary:[0,204,255],dark:[33,37,41],light:[248,249,250],success:[16,185,129],warning:[245,158,11],white:[255,255,255],gray:[107,114,128]},F=e.length>0?e.reduce((u,h)=>u+h.yield*h.percentage/100,0):0,C=o*F/100,c=C/12,l=[...new Set(e.map(u=>u.sector))],x=[...new Set(e.map(u=>u.geography))],m=e.filter(u=>u.isr).length,a=e.length>0?e.reduce((u,h)=>u+h.tof*h.percentage/100,0):0;e.reduce((u,h)=>u+h.capitalization,0),Y(n,t,e,s,i,r),n.addPage(),k(n,t,s,i,r),n.addPage(),M(n,e,o,F,c,C,l,x,m,a,s,r),n.addPage(),L(n,e,o,s,r),n.addPage(),A(n,e,o,F,C,c,t,s,i,r),n.addPage(),N(n,e,s,i,r),n.addPage(),O(n,s,i,r);const S=`rapport-portefeuille-scpi-${t?.name?.replace(/\s+/g,"-").toLowerCase()||"client"}-${new Date().toISOString().split("T")[0]}.pdf`;n.save(S)},Y=(e,t,o,n,s,i)=>{e.setFillColor(...i.primary),e.rect(0,0,n,s*.6,"F"),e.setFillColor(...i.secondary),e.rect(0,s*.6,n,s*.4,"F"),e.setTextColor(...i.white),e.setFontSize(42),e.setFont("helvetica","bold"),e.text("MaximusSCPI",n/2,50,{align:"center"}),e.setFontSize(16),e.setFont("helvetica","normal"),e.text("Plateforme d'analyse SCPI powered by IA",n/2,70,{align:"center"}),e.setFontSize(36),e.setFont("helvetica","bold");const r=s*.4;e.text("Rapport PersonnalisÃ©",n/2,r,{align:"center"}),e.setFontSize(28),e.text("Votre Portefeuille SCPI",n/2,r+25,{align:"center"}),t&&(e.setFontSize(20),e.setFont("helvetica","normal"),e.text(`PrÃ©parÃ© pour : ${t.name}`,n/2,r+55,{align:"center"}),e.setFontSize(16),e.text(`${t.riskProfile.icon} Profil ${t.riskProfile.name}`,n/2,r+75,{align:"center"}),e.text(`ðŸ’° ${b(t.investmentAmount)} â€¢ ${o.length} SCPI`,n/2,r+90,{align:"center"})),e.setTextColor(...i.dark),e.setFontSize(14),e.text(`ðŸ“… GÃ©nÃ©rÃ© le ${new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`,n/2,s-40,{align:"center"}),e.setFontSize(10),e.setTextColor(...i.gray),e.text("Document confidentiel - MaximusSCPI Â© 2025",n/2,s-20,{align:"center"})},k=(e,t,o,n,s)=>{if(T(e,"Votre Profil Investisseur",o,s),!t){e.setTextColor(...s.dark),e.setFontSize(12),e.text("Profil non dÃ©fini",20,60);return}const{riskProfile:i}=t,r=50;e.setFillColor(240,248,255),e.roundedRect(20,r,o-40,70,5,5,"F"),e.setDrawColor(...s.primary),e.setLineWidth(2),e.roundedRect(20,r,o-40,70,5,5,"S"),e.setTextColor(...s.primary),e.setFontSize(24),e.setFont("helvetica","bold"),e.text(`${i.icon} Profil ${i.name}`,30,r+20),e.setTextColor(...s.dark),e.setFontSize(14),e.setFont("helvetica","normal"),q(e,i.description,o-60,14).forEach((m,a)=>{e.text(m,30,r+40+a*12)});const C=r+90;e.setTextColor(...s.primary),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("ðŸŽ¯ CaractÃ©ristiques de votre profil",20,C);const c=[`â° Horizon d'investissement : ${i.characteristics.horizon}`,`ðŸ“Š Objectif principal : ${i.characteristics.objective}`,`ðŸŽšï¸ TolÃ©rance au risque : ${i.characteristics.tolerance}`,`ðŸ“ˆ Rendement cible : ${i.targetYield.min}% - ${i.targetYield.max}%`,`ðŸ¢ Allocation max par SCPI : ${i.maxSingleAllocation}%`,`ðŸŽ¯ Diversification min : ${i.minDiversification} SCPI`];e.setTextColor(...s.dark),e.setFontSize(12),e.setFont("helvetica","normal"),c.forEach((m,a)=>{e.text(m,30,C+25+a*15)});const l=C+120;e.setTextColor(...s.primary),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("ðŸ‘¤ Vos informations",20,l);const x=[`ðŸ‘¤ Ã‚ge : ${t.age} ans`,`ðŸ’° Montant d'investissement : ${b(t.investmentAmount)}`,`â° Horizon d'investissement : ${t.investmentHorizon} ans`,`ðŸ›ï¸ TMI : ${t.tmi||"Non renseignÃ©e"}%`];if(e.setTextColor(...s.dark),e.setFontSize(12),x.forEach((m,a)=>{e.text(m,30,l+25+a*15)}),t.preferences){const m=l+90;e.setTextColor(...s.primary),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("âš™ï¸ Vos prÃ©fÃ©rences",20,m);const a=[];t.preferences.isr&&a.push("ðŸŒ± Label ISR uniquement"),t.preferences.european&&a.push("ðŸ‡ªðŸ‡º SCPI europÃ©ennes privilÃ©giÃ©es"),t.preferences.noFees&&a.push("ðŸ’° Sans frais d'entrÃ©e"),t.preferences.sectors.length>0&&a.push(`ðŸ¢ Secteurs prÃ©fÃ©rÃ©s : ${t.preferences.sectors.join(", ")}`),e.setTextColor(...s.dark),e.setFontSize(12),a.forEach((S,u)=>{e.text(S,30,m+25+u*15)})}},M=(e,t,o,n,s,i,r,F,C,c,l,x)=>{T(e,"RÃ©sumÃ© de Votre Portefeuille",l,x);const m=60,a=(l-60)/2,S=35;z(e,"ðŸ’¶ MONTANT TOTAL INVESTI",b(o),20,m,a,S,x.primary),z(e,"ðŸ“ˆ RENDEMENT MOYEN PONDÃ‰RÃ‰",`${n.toFixed(2)}%`,30+a,m,a,S,x.success),z(e,"ðŸ¢ NOMBRE DE SCPI",`${t.length}`,20,m+45,a,S,x.secondary),z(e,"ðŸŽ¯ TOF MOYEN PONDÃ‰RÃ‰",`${c.toFixed(1)}%`,30+a,m+45,a,S,x.warning);const u=m+100;e.setFillColor(240,253,244),e.roundedRect(20,u,l-40,60,8,8,"F"),e.setDrawColor(...x.success),e.setLineWidth(2),e.roundedRect(20,u,l-40,60,8,8,"S"),e.setTextColor(...x.success),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("ðŸ’° Revenus EstimÃ©s (avant fiscalitÃ©)",30,u+20),e.setTextColor(...x.dark),e.setFontSize(16),e.setFont("helvetica","normal"),e.text(`ðŸ“… Revenus mensuels : ${b(s)}`,30,u+40),e.text(`ðŸ“Š Revenus annuels : ${b(i)}`,30,u+55);const h=u+80;e.setTextColor(...x.primary),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("ðŸ“‹ CaractÃ©ristiques du Portefeuille",20,h);const v=[`ðŸŽ¯ Diversification sectorielle : ${r.length} secteurs`,`ðŸŒ Diversification gÃ©ographique : ${F.length} zones`,`ðŸŒ± SCPI avec label ISR : ${C}/${t.length} (${Math.round(C/t.length*100)}%)`,`ðŸ’Ž Score de qualitÃ© moyen : ${X(t)}/100`,`ðŸ“ˆ Performance vs marchÃ© : ${n>5.1?"+":""}${(n-5.1).toFixed(2)}% vs moyenne`,`ðŸ›ï¸ Capitalisation totale : ${b(totalCapitalization)}`];e.setTextColor(...x.dark),e.setFontSize(12),e.setFont("helvetica","normal"),v.forEach((g,$)=>{e.text(g,30,h+25+$*15)})},L=(e,t,o,n,s)=>{if(T(e,"Composition DÃ©taillÃ©e du Portefeuille",n,s),t.length===0){e.setTextColor(...s.dark),e.setFontSize(14),e.text("Aucune SCPI sÃ©lectionnÃ©e",20,80);return}const i=70,r=18,F=n-40,C=[45,35,25,15,15,15,20,10,10];let c=20;e.setFillColor(...s.primary),e.roundedRect(20,i,F,r,3,3,"F"),e.setTextColor(...s.white),e.setFontSize(10),e.setFont("helvetica","bold"),["SCPI","SociÃ©tÃ©","Montant â‚¬","%","Rdt%","TOF%","Secteur","ISR","GÃ©o"].forEach((a,S)=>{e.text(a,c+2,i+12),c+=C[S]}),t.forEach((a,S)=>{const u=i+r*(S+1);c=20,S%2===0&&(e.setFillColor(248,250,252),e.rect(20,u,F,r,"F")),e.setDrawColor(229,231,235),e.setLineWidth(.5),e.rect(20,u,F,r,"S"),[y(a.name,20),y(a.company,15),b(a.investedAmount),`${a.percentage.toFixed(1)}%`,`${a.yield.toFixed(1)}%`,`${a.tof.toFixed(0)}%`,`${H(a.sector)} ${w(a.sector)}`,a.isr?"âœ“":"âœ—",V(a.geography)].forEach((v,g)=>{g===4?a.yield>=6?e.setTextColor(...s.success):a.yield>=4?e.setTextColor(...s.primary):e.setTextColor(...s.warning):g===7?e.setTextColor(...a.isr?s.success:s.warning):e.setTextColor(...s.dark),e.setFontSize(9),e.setFont("helvetica",g===0?"bold":"normal"),e.text(v,c+2,u+12),c+=C[g]})});const x=i+r*(t.length+1);e.setFillColor(...s.success),e.roundedRect(20,x,F,r,3,3,"F"),e.setTextColor(...s.white),e.setFontSize(11),e.setFont("helvetica","bold"),c=20,e.text("TOTAL PORTEFEUILLE",c+2,x+12),c+=C[0]+C[1],e.text(b(o),c+2,x+12),c+=C[2],e.text("100%",c+2,x+12),c+=C[3];const m=t.reduce((a,S)=>a+S.yield*S.percentage/100,0);e.text(`${m.toFixed(2)}%`,c+2,x+12)},A=(e,t,o,n,s,i,r,F,C,c)=>{T(e,"Simulation PersonnalisÃ©e",F,c);const l=60;e.setFillColor(240,253,244),e.roundedRect(20,l,F-40,50,8,8,"F"),e.setDrawColor(...c.success),e.setLineWidth(2),e.roundedRect(20,l,F-40,50,8,8,"S"),e.setTextColor(...c.success),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("ðŸ’° Revenus EstimÃ©s (avant fiscalitÃ©)",30,l+18),e.setTextColor(...c.dark),e.setFontSize(14),e.setFont("helvetica","normal"),e.text(`ðŸ“… Revenus mensuels : ${b(i)}`,30,l+35),e.text(`ðŸ“Š Revenus annuels : ${b(s)}`,30,l+48);const x=l+70;e.setTextColor(...c.primary),e.setFontSize(18),e.setFont("helvetica","bold"),e.text("ðŸ“ˆ Projections d'Ã‰volution du Capital",20,x);const m=x+20,a=[{years:1,label:"Court terme"},{years:5,label:"Moyen terme"},{years:10,label:"Long terme"},{years:15,label:"TrÃ¨s long terme"}];e.setFillColor(...c.primary),e.roundedRect(20,m,F-40,15,3,3,"F"),e.setTextColor(...c.white),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Horizon",25,m+10),e.text("Capital ProjetÃ©",70,m+10),e.text("Plus-Value",120,m+10),e.text("Rendement Total",150,m+10),a.forEach((u,h)=>{const v=m+15*(h+1),g=o*Math.pow(1+n/100,u.years),$=g-o,I=(g/o-1)*100;h%2===0&&(e.setFillColor(248,250,252),e.rect(20,v,F-40,15,"F")),e.setTextColor(...c.dark),e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`${u.years} an${u.years>1?"s":""} (${u.label})`,25,v+10),e.setFont("helvetica","bold"),e.text(b(g),70,v+10),e.setTextColor(...c.success),e.text(`+${b($)}`,120,v+10),e.text(`+${I.toFixed(1)}%`,150,v+10)});const S=m+80;if(e.setFillColor(255,248,220),e.roundedRect(20,S,F-40,40,5,5,"F"),e.setDrawColor(...c.warning),e.setLineWidth(1),e.roundedRect(20,S,F-40,40,5,5,"S"),e.setTextColor(...c.warning),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("âš ï¸ Avertissement Important",25,S+15),e.setTextColor(...c.dark),e.setFontSize(11),e.setFont("helvetica","normal"),e.text("Ces projections sont indicatives et basÃ©es sur les performances actuelles.",25,S+28),e.text("Les performances passÃ©es ne prÃ©jugent pas des performances futures.",25,S+38),r){const u=S+60;e.setTextColor(...c.primary),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("ðŸŽ¯ Analyse vs Objectifs",20,u);const h=r.riskProfile.targetYield.min,v=r.riskProfile.targetYield.max,g=n>=h&&n<=v;e.setTextColor(...g?c.success:c.warning),e.setFontSize(12),e.text(`Rendement cible : ${h}% - ${v}%`,30,u+20),e.text(`Rendement obtenu : ${n.toFixed(2)}% ${g?"âœ… Conforme":"âš ï¸ Hors cible"}`,30,u+35)}},N=(e,t,o,n,s)=>{if(T(e,"Analyse Graphique du Portefeuille",o,s),t.length===0){e.setTextColor(...s.dark),e.setFontSize(14),e.text("Aucune donnÃ©e Ã  afficher",20,80);return}const i=t.map((F,C)=>({name:y(F.name,15),value:F.percentage,color:D(C)}));P(e,"ðŸ¢ RÃ©partition par SCPI",i,20,70,80,s);const r=B(t);P(e,"ðŸ­ RÃ©partition Sectorielle",r,110,70,80,s),j(e,t,20,180,o-40,60,s)},O=(e,t,o,n)=>{e.setFillColor(248,250,252),e.rect(0,0,t,o,"F"),e.setTextColor(...n.primary),e.setFontSize(38),e.setFont("helvetica","bold"),e.text("MaximusSCPI",t/2,60,{align:"center"}),e.setFontSize(14),e.setFont("helvetica","normal"),e.text("Plateforme d'analyse SCPI powered by IA",t/2,80,{align:"center"}),e.setFontSize(32),e.setFont("helvetica","bold"),e.setTextColor(...n.dark);const s=o*.35;e.text("ðŸš€ PrÃªt Ã  ConcrÃ©tiser",t/2,s,{align:"center"}),e.text("Votre Projet ?",t/2,s+25,{align:"center"}),e.setFontSize(16),e.setFont("helvetica","normal"),e.setTextColor(75,85,99);const i=s+60;e.text("Un conseiller expert MaximusSCPI peut finaliser",t/2,i,{align:"center"}),e.text("avec vous cette allocation optimisÃ©e.",t/2,i+20,{align:"center"});const r=i+50,F=140,C=30,c=(t-F)/2;e.setFillColor(...n.success),e.roundedRect(c,r,F,C,8,8,"F"),e.setTextColor(...n.white),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("ðŸ‘‰ Prendre Rendez-vous",t/2,r+20,{align:"center"});const l=r+60;e.setFillColor(...n.white),e.roundedRect(30,l,t-60,80,8,8,"F"),e.setDrawColor(...n.primary),e.setLineWidth(2),e.roundedRect(30,l,t-60,80,8,8,"S"),e.setTextColor(...n.primary),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Eric Bellaiche",t/2,l+20,{align:"center"}),e.setFontSize(14),e.setFont("helvetica","normal"),e.text("Conseiller en Gestion de Patrimoine CertifiÃ©",t/2,l+35,{align:"center"}),e.setTextColor(...n.dark),e.setFontSize(12),e.text("ðŸ“§ eric.bellaiche@gmail.com",t/2,l+50,{align:"center"}),e.text("ðŸŒ https://eric-bellaiche.fr",t/2,l+65,{align:"center"}),e.setFontSize(9),e.setTextColor(...n.gray);const x=o-50;e.text("Les performances passÃ©es ne prÃ©jugent pas des performances futures. Tout investissement prÃ©sente un risque de perte en capital.",t/2,x,{align:"center"}),e.text("Eric Bellaiche - CIF nÂ°D016571 - Sous le contrÃ´le de l'ACPR - Document gÃ©nÃ©rÃ© par MaximusSCPI",t/2,x+12,{align:"center"}),e.text("Conseil en investissement non contractuel - Consultez un professionnel avant tout investissement",t/2,x+24,{align:"center"})},T=(e,t,o,n)=>{e.setFillColor(...n.primary),e.rect(0,0,o,8,"F"),e.setTextColor(...n.primary),e.setFontSize(24),e.setFont("helvetica","bold"),e.text(t,20,35),e.setDrawColor(...n.primary),e.setLineWidth(2),e.line(20,42,o-20,42)},z=(e,t,o,n,s,i,r,F,C)=>{e.setFillColor(F[0],F[1],F[2],.1),e.roundedRect(n,s,i,r,5,5,"F"),e.setDrawColor(...F),e.setLineWidth(2),e.roundedRect(n,s,i,r,5,5,"S"),e.setTextColor(...F),e.setFontSize(10),e.setFont("helvetica","bold"),e.text(t,n+5,s+12),e.setFontSize(18),e.text(o,n+5,s+28)},P=(e,t,o,n,s,i,r)=>{if(e.setTextColor(...r.dark),e.setFontSize(14),e.setFont("helvetica","bold"),e.text(t,n,s-10),o.length===0)return;const F=n+i/2,C=s+i/2,c=i*.3;let l=0;const x=o.reduce((a,S)=>a+S.value,0);o.forEach((a,S)=>{const u=a.value/x*360,h=R(a.color);e.setFillColor(h.r,h.g,h.b);const v=F+Math.cos((l+u/2)*Math.PI/180)*c*.5,g=C+Math.sin((l+u/2)*Math.PI/180)*c*.5;e.rect(v-3,g-3,6,6,"F"),l+=u});const m=n+i+10;o.forEach((a,S)=>{const u=s+S*12,h=R(a.color);e.setFillColor(h.r,h.g,h.b),e.rect(m,u,4,4,"F"),e.setTextColor(...r.dark),e.setFontSize(9),e.setFont("helvetica","normal"),e.text(`${a.name} (${a.value.toFixed(1)}%)`,m+8,u+3)})},j=(e,t,o,n,s,i,r)=>{if(e.setTextColor(...r.dark),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("ðŸ“Š Rendements par SCPI",o,n-10),t.length===0)return;const F=Math.max(...t.map(l=>l.yield),8),C=Math.min((s-20)/t.length-2,25),c=i-25;e.setDrawColor(...r.gray),e.setLineWidth(1),e.line(o,n,o,n+c),e.line(o,n+c,o+s,n+c);for(let l=0;l<=4;l++){const x=n+c-l*c/4,m=l*F/4;e.setDrawColor(229,231,235),e.setLineWidth(.5),e.line(o,x,o+s,x),e.setTextColor(...r.gray),e.setFontSize(8),e.text(`${m.toFixed(1)}%`,o-8,x+1,{align:"right"})}t.forEach((l,x)=>{const m=l.yield/F*c,a=o+10+x*(C+2),S=n+c-m;l.yield>=6?e.setFillColor(...r.success):l.yield>=4?e.setFillColor(...r.primary):e.setFillColor(...r.warning),e.roundedRect(a,S,C,m,2,2,"F"),e.setDrawColor(...r.dark),e.setLineWidth(.5),e.roundedRect(a,S,C,m,2,2,"S"),e.setTextColor(...r.dark),e.setFontSize(8),e.setFont("helvetica","bold"),e.text(`${l.yield.toFixed(1)}%`,a+C/2,S-3,{align:"center"}),e.setFontSize(7),e.setFont("helvetica","normal");const u=y(l.name,8);e.text(u,a+C/2,n+c+12,{align:"center"})})},q=(e,t,o,n)=>{e.setFontSize(n);const s=t.split(" "),i=[];let r="";return s.forEach(F=>{const C=r+(r?" ":"")+F;e.getTextWidth(C)>o&&r?(i.push(r),r=F):r=C}),r&&i.push(r),i},y=(e,t)=>e.length>t?e.substring(0,t-2)+"..":e,H=e=>({bureaux:"ðŸ¢",commerces:"ðŸ¬",residentiel:"ðŸ ",sante:"ðŸ¥",logistique:"ðŸšš",hotellerie:"ðŸ¨",diversifie:"ðŸ—ï¸"})[e]||"ðŸ¢",w=e=>({bureaux:"Bureaux",commerces:"Commerces",residentiel:"RÃ©sidentiel",sante:"SantÃ©",logistique:"Logistique",hotellerie:"HÃ´tellerie",diversifie:"DiversifiÃ©"})[e]||"DiversifiÃ©",V=e=>({france:"ðŸ‡«ðŸ‡·",europe:"ðŸ‡ªðŸ‡º",international:"ðŸŒ"})[e]||"ðŸ‡«ðŸ‡·",D=e=>{const t=["#0056b3","#00ccff","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1","#14b8a6","#f97316","#8b5cf6","#06b6d4"];return t[e%t.length]},R=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:86,b:179}},B=e=>{const t={};return e.forEach(o=>{const n=w(o.sector);t[n]||(t[n]=0),t[n]+=o.percentage}),Object.entries(t).map(([o,n],s)=>({name:o,value:n,color:D(s+10)})).sort((o,n)=>n.value-o.value)},X=e=>{if(e.length===0)return 0;const t=e.reduce((o,n)=>{let s=50;return n.tof>=95&&(s+=20),n.isr&&(s+=15),n.fees===0&&(s+=10),n.capitalization>=5e8&&(s+=5),o+s*n.percentage/100},0);return Math.round(t)};export{W as generatePortfolioPDF};
